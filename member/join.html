<!DOCTYPE html>
<html lang="ko-kr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Bootstrap 101 Template</title>
<link href="../css/bootstrap.css" rel="stylesheet">
<link href="../css/bootstrap.min.css" rel="stylesheet">
<link href="../css/bootstrap-theme.css" rel="stylesheet">
<link href="../css/custom2.css" rel="stylesheet">
<link href="../css/font-awesome.min.css" rel="stylesheet">
<link href="../css/main.css" rel="stylesheet">

<title>Urban by TEMPLATED</title>
</head>
<style>
.container {
	width : 400px !important;
}
</style>
</head>
<body class="subpage">

<header id="header">
	<div class="logo"><a href="/index.jsp">Urban <span>by TEMPLATED</span></a></div>
	<a href="#menu">Menu</a>
</header>

<!-- Nav -->
<nav id="menu">
	<ul class="links">
			<li><a href="/index.html">홈으로</a></li>
			<li><a href="../member/login.html">로그인</a><li>
			<li><a href="../member/join.html">회원가입</a></li>
			<li><a href="../center/notice.html">공개게시판</a></li>
			<li><a href="../admin/list.html">관리자 메뉴</a></li>
	</ul>
</nav>



<body class="subpage">

	<div class="container">
	<div class="box" style="margin-top:50px;">
	<form id="join" action="joinPro.jsp" method="post" name="frm">
		<h2>회원가입</h2>    
		<label>아이디</label> <input name="id" type="text" class="id" > 
		<input type="button" value="ID중복확인" class="dup" onclick="winopen()"><br>
		<span id="idDupMessage"></span>
		<br>
		<label>비밀번호 </label> <input name="passwd" type="password" class="pass"><br>
		<label>비밀번호 확인 </label> <input name="passwd2" type="password" class="pass"><br>
		<label>이름 </label> <input name="name" type="text" class="nick"><br>
		<label>나이 </label> <input name="age" type="number"><br>
		<label>성별 </label> <input name="gender" type="button" value="남">
							 <input name="gender" type="button" value="여"><br>
		<label>이메일 </label> <input name="email" type="email" class="email" ><br>
		<label>이메일 확인</label> <input name="email2" type="email" class="email"><br>
	

	<div id="buttons">
		<input type="submit" value="회원가입" class="submit"> <input type="reset" value="리셋" class="cancel">
	</div>
	</form> 
	</div>
	</div>

<script src="/script/jquery-3.5.1.js"></script>
<script>
	$('input[name="id"]').keyup(function (event) {
		var id = $(this).val();
		
		$.ajax({
			url: '/ajax/ajax_join_IDCheck.jsp',
			data: { id: id },
			success: function (data) {
				console.log(data.isIdDup);
				console.log(data.name);
				console.log(data.age);
				
				showIdDupMessage(data);
				
		
			}
		});
	});
	
	function showIdDupMessage(data) {
		if (data.isIdDup) {
			$('span#idDupMessage').html('이미 사용중인 아이디 입니다.').css('color', 'red');
		} else {
			$('span#idDupMessage').html('사용 가능한 아이디 입니다.').css('color', 'green');
		}
	}

	function winopen() {
		var id = document.frm.id.value;
		console.log('id = ' + id);
		
		if (id == '') {
			alert('아이디를 입력하세요');
			document.frm.id.focus();
			return;
		}		
		
		// 새창 열어서 jsp요청 	window.open()
		open('join_IDCheck.jsp?id=' + id, 'dupCheck', 'width=400,height=200');
		
		
	}
</script>

	<!-- Scripts -->
	<script src="../js/jquery.min.js"></script>
	<script src="../js/jquery.scrolly.min.js"></script>
	<script src="../js/jquery.scrollex.min.js"></script>
	<script src="../js/skel.min.js"></script>
	<script src="../js/util.js"></script>
	<script src="../js/main.js"></script>
	<script src="../js/jquery-3.5.1.js"></script>
	<script src="../js/bootstrap.js"></script>

</body>
</html>